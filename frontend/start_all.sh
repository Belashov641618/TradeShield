#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ TradeShield - –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"
echo "========================================"

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
cleanup() {
    echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤..."
    kill $BACKEND_PID $FRONTEND_PID 2>/dev/null
    exit 0
}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
trap cleanup SIGINT SIGTERM

echo "üì¶ –ó–∞–ø—É—Å–∫ Backend API (–ø–æ—Ä—Ç 5000)..."
cd backend
python3 app.py &
BACKEND_PID=$!
cd ..

echo "üåê –ó–∞–ø—É—Å–∫ Frontend —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç 8080)..."
cd TradeShield
python3 -m http.server 8080 &
FRONTEND_PID=$!
cd ..

echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤..."
sleep 3

echo "‚úÖ –°–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã!"
echo ""
echo "üîó –°—Å—ã–ª–∫–∏:"
echo "  Frontend: http://localhost:8080"
echo "  Backend API: http://localhost:5000"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:"
echo "  1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080 –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
echo "  2. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù (–º–∏–Ω–∏–º—É–º 10 —Ü–∏—Ñ—Ä)"
echo "  3. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ç–æ–≤–∞—Ä–∞ (–Ω–∞—á–Ω–∏—Ç–µ —Å 123, 234 –∏–ª–∏ 345)"
echo "  4. –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"
echo "  5. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"
echo "  6. –ù–∞–∂–º–∏—Ç–µ '–ê–Ω–∞–ª–∏–∑'"
echo ""
echo "üõë –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"

# –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
wait
